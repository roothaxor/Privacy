(function(){var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(xhttp.readyState==4&&xhttp.status==200){document.getElementById("connection").innerHTML+='<b>Public IP:</b> '+JSON.parse(xhttp.responseText).ip+'<br>';}};xhttp.open("GET","https://api.ipify.org?format=json",true);xhttp.send();var xhttp3=new XMLHttpRequest();xhttp3.onreadystatechange=function(){if(xhttp3.readyState==4&&xhttp3.status==200){document.getElementById("isp").innerHTML+='<b>Service Provider:</b> '+JSON.parse(xhttp3.responseText).isp+'<br>';}};xhttp3.open("GET","http://ip-api.com/json",true);xhttp3.send();if(document.referrer&&document.referrer!==''){document.getElementById("referrer").innerHTML='<b>Previous Page:</b>  '+document.referrer+'<br>';}function getIPs(callback){var ip_dups={};var RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;var useWebKit=!!window.webkitRTCPeerConnection;if(!RTCPeerConnection){var win=iframe.contentWindow;RTCPeerConnection=win.RTCPeerConnection||win.mozRTCPeerConnection||win.webkitRTCPeerConnection;useWebKit=!!win.webkitRTCPeerConnection;}var mediaConstraints={optional:[{RtpDataChannels:true}]};var servers={iceServers:[{urls:"stun:stun.services.mozilla.com"}]};var pc=new RTCPeerConnection(servers,mediaConstraints);var sentResult=false;function handleCandidate(candidate){var ip_regex=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/
var ip_addr=ip_regex.exec(candidate)[1];if(!sentResult&&ip_dups[ip_addr]===undefined){sentResult=true;callback(ip_addr);}ip_dups[ip_addr]=true;}pc.onicecandidate=function(ice){if(ice.candidate)handleCandidate(ice.candidate.candidate);};pc.createDataChannel("");pc.createOffer(function(result){pc.setLocalDescription(result,function(){},function(){});},function(){});setTimeout(function(){var lines=pc.localDescription.sdp.split('\n');lines.forEach(function(line){if(line.indexOf('a=candidate:')===0)handleCandidate(line);});},1000);}getIPs(function(ip){document.getElementById("connection").innerHTML+='<b>Local IP:</b> '+ip+'<br>';window.ip=ip;});}())